(window.webpackJsonp=window.webpackJsonp||[]).push([[58],{621:function(t,a,s){"use strict";s.r(a);var r=s(13),n=Object(r.a)({},(function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h3",{attrs:{id:"非受控-ref"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#非受控-ref"}},[t._v("#")]),t._v(" 非受控----ref")]),t._v(" "),s("ol",[s("li",[s("strong",[t._v("ref-name")]),t._v("  15版本；快弃用")])]),t._v(" "),s("p",[t._v('在表单中使用ref="inputRef";在全局中使用this.refs.inputRef.value获取值。')]),t._v(" "),s("ol",{attrs:{start:"2"}},[s("li",[s("strong",[t._v("ref-callback")]),t._v("  16版本")])]),t._v(" "),s("p",[t._v("在全局中声明inputRef =null;然后在表单中使用ref={(target)=>{this.inputRef = target}}")]),t._v(" "),s("ol",{attrs:{start:"3"}},[s("li",[s("strong",[t._v("react.createRef()")]),t._v("   16版本")])]),t._v(" "),s("p",[t._v("react.createRef() 初始化返回一个{current:null}")]),t._v(" "),s("p",[t._v("声明一个变量inputRef = react.createRef()；")]),t._v(" "),s("p",[t._v("然后在input中添加ref={this.inputRef}，就可以在全局中获取input 的值：this.inputRef.current.value")]),t._v(" "),s("p",[s("strong",[t._v("函数式组件")]),t._v("使用ref:React.forwordRef()；不能标记函数式组件,")]),t._v(" "),s("p",[t._v("ref还可以标记"),s("strong",[t._v("类组件")]),t._v("，获取类组件的实例")]),t._v(" "),s("h3",{attrs:{id:"非受控"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#非受控"}},[t._v("#")]),t._v(" 非受控----")]),t._v(" "),s("p",[t._v("声明一个实例属性，然后在表单中声明一个change事件，然后将e.target.value的值赋给这个实例属性；好处是不会每次都render,性能提高，可控性减少")]),t._v(" "),s("p",[t._v("表单中react中虚拟DOM多增加了一个defaultValue属性，使defaultValue受控，而change事件不受控")]),t._v(" "),s("p",[t._v("可以和防抖一起使用")]),t._v(" "),s("h3",{attrs:{id:"受控"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#受控"}},[t._v("#")]),t._v(" 受控")]),t._v(" "),s("p",[t._v("只要在表单中加上value就是受控，就不能直接改变value值，需要通过setState设置value的值，通过数据去改变视图。但是缺点就是性能不好，持续输入时会一直render，消耗性能。")]),t._v(" "),s("p",[t._v("最好不要和防抖一起使用")]),t._v(" "),s("h3",{attrs:{id:"ref转发"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ref转发"}},[t._v("#")]),t._v(" ref转发")]),t._v(" "),s("p",[t._v("导入forwordRef")]),t._v(" "),s("div",{staticClass:"language-javascript line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 除了加props以外，还可以将ref拆解出来;可以将父元素标记的DOM组件，可以通过ref参数拆解出来,但是需要forwordRef包裹一下")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" Child "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("forwordRef")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("props"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("ref")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("handleClick")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        \n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    ref"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("current"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        handleClick "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//转发绑定")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("div onClick"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("handleClick"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("ff"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("div"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n在父组件中使用：\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("Child name"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"dd"')]),t._v(" ref"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("ref"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n然后ref"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("current就可以接收到子组件传递的对象\n可以直接执行ref"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("current"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("handleClick")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br"),s("span",{staticClass:"line-number"},[t._v("12")]),s("br"),s("span",{staticClass:"line-number"},[t._v("13")]),s("br"),s("span",{staticClass:"line-number"},[t._v("14")]),s("br")])])])}),[],!1,null,null,null);a.default=n.exports}}]);