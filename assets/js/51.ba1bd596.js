(window.webpackJsonp=window.webpackJsonp||[]).push([[51],{610:function(e,t,r){"use strict";r.r(t);var a=r(13),s=Object(a.a)({},(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[r("h3",{attrs:{id:"fiber"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#fiber"}},[e._v("#")]),e._v(" fiber")]),e._v(" "),r("p",[r("strong",[e._v("起因")])]),e._v(" "),r("p",[e._v("当前版本的react的diff是同步的，一旦开始不可中断，如果vDOM树足够庞大，则渲染时间过长，页面就会有延迟，用户看见的页面就会有卡顿现象。")]),e._v(" "),r("p",[e._v("以前是以一个树为单位，不可中断；现在是以一个节点为单位，可以中断；")]),e._v(" "),r("h5",{attrs:{id:"fiber节点"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#fiber节点"}},[e._v("#")]),e._v(" fiber节点")]),e._v(" "),r("p",[e._v("React16.3版本，在vDom结构的基础上，添加了链表节点的特性：还标记了一些不安全的钩子child,sibling,return(指回父节点),last(指向更新前的对象)")]),e._v(" "),r("h5",{attrs:{id:"react并发模式-beta版本-fiber架构"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#react并发模式-beta版本-fiber架构"}},[e._v("#")]),e._v(" react并发模式 ---beta版本 ---fiber架构")]),e._v(" "),r("p",[e._v("预计划React17版本上，推迟到了react18版本")]),e._v(" "),r("p",[e._v("并发模式：将以树为单位改为节点为单位")]),e._v(" "),r("p",[e._v("requestIdleCallback()")]),e._v(" "),r("p",[e._v("先询问这个vNode是否有空闲，然后使用generater去暂停运行，")]),e._v(" "),r("p",[e._v("render的时候有可能会多次调用初始化钩子，rerender的时候可能会多次调用修改的钩子")]),e._v(" "),r("p",[e._v("不安全的钩子彻底弃用，启用新的钩子：static getDerivedStateFormProps,可以替代启用的时候的功能，也可以替代更新阶段的钩子；getSnapshotBeforeUpdate:在更新之前获取快照")]),e._v(" "),r("img",{staticStyle:{zoom:"50%"},attrs:{src:"C:\\Users\\yyh\\AppData\\Roaming\\Typora\\typora-user-images\\image-20220113164336892.png",alt:"image-20220113164336892"}})])}),[],!1,null,null,null);t.default=s.exports}}]);