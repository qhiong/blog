<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>DOM</title>
    <meta name="generator" content="VuePress 1.8.2">
    <link rel="icon" href="/blog/favicon.ico">
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no">
    
    <link rel="preload" href="/blog/assets/css/0.styles.e16238e2.css" as="style"><link rel="preload" href="/blog/assets/js/app.b2f6f841.js" as="script"><link rel="preload" href="/blog/assets/js/3.9045caea.js" as="script"><link rel="preload" href="/blog/assets/js/1.938e8213.js" as="script"><link rel="preload" href="/blog/assets/js/14.7af64170.js" as="script"><link rel="prefetch" href="/blog/assets/js/10.46acba30.js"><link rel="prefetch" href="/blog/assets/js/11.6358c923.js"><link rel="prefetch" href="/blog/assets/js/12.bd1d2ec0.js"><link rel="prefetch" href="/blog/assets/js/13.34bd78de.js"><link rel="prefetch" href="/blog/assets/js/15.a59848f8.js"><link rel="prefetch" href="/blog/assets/js/16.6bc5ff00.js"><link rel="prefetch" href="/blog/assets/js/17.50a3b340.js"><link rel="prefetch" href="/blog/assets/js/18.ab0d59d3.js"><link rel="prefetch" href="/blog/assets/js/19.15715817.js"><link rel="prefetch" href="/blog/assets/js/20.14c001a7.js"><link rel="prefetch" href="/blog/assets/js/21.fe40814e.js"><link rel="prefetch" href="/blog/assets/js/22.7078fc69.js"><link rel="prefetch" href="/blog/assets/js/23.02c17db6.js"><link rel="prefetch" href="/blog/assets/js/24.55a6929f.js"><link rel="prefetch" href="/blog/assets/js/25.663ae775.js"><link rel="prefetch" href="/blog/assets/js/26.88122a41.js"><link rel="prefetch" href="/blog/assets/js/27.e4854ccd.js"><link rel="prefetch" href="/blog/assets/js/28.64590c83.js"><link rel="prefetch" href="/blog/assets/js/29.63640aa4.js"><link rel="prefetch" href="/blog/assets/js/30.c32bbc2d.js"><link rel="prefetch" href="/blog/assets/js/31.f0a692ce.js"><link rel="prefetch" href="/blog/assets/js/32.8f67b6de.js"><link rel="prefetch" href="/blog/assets/js/33.49bc3a48.js"><link rel="prefetch" href="/blog/assets/js/34.982c25f3.js"><link rel="prefetch" href="/blog/assets/js/35.37f39c89.js"><link rel="prefetch" href="/blog/assets/js/36.f6162f2c.js"><link rel="prefetch" href="/blog/assets/js/37.5393bf89.js"><link rel="prefetch" href="/blog/assets/js/38.7043fb48.js"><link rel="prefetch" href="/blog/assets/js/39.1f308971.js"><link rel="prefetch" href="/blog/assets/js/4.3860058e.js"><link rel="prefetch" href="/blog/assets/js/40.ddcea1cf.js"><link rel="prefetch" href="/blog/assets/js/41.3bd98850.js"><link rel="prefetch" href="/blog/assets/js/42.af6ab47a.js"><link rel="prefetch" href="/blog/assets/js/43.52a4a411.js"><link rel="prefetch" href="/blog/assets/js/44.0b6a535d.js"><link rel="prefetch" href="/blog/assets/js/45.dc3886eb.js"><link rel="prefetch" href="/blog/assets/js/46.29cd4fba.js"><link rel="prefetch" href="/blog/assets/js/47.580b9ac0.js"><link rel="prefetch" href="/blog/assets/js/48.37599960.js"><link rel="prefetch" href="/blog/assets/js/49.383fbc4a.js"><link rel="prefetch" href="/blog/assets/js/5.04dec85b.js"><link rel="prefetch" href="/blog/assets/js/50.01e420a0.js"><link rel="prefetch" href="/blog/assets/js/51.ba1bd596.js"><link rel="prefetch" href="/blog/assets/js/52.a8515c61.js"><link rel="prefetch" href="/blog/assets/js/53.1095a660.js"><link rel="prefetch" href="/blog/assets/js/54.83bba228.js"><link rel="prefetch" href="/blog/assets/js/55.ef6bdaaf.js"><link rel="prefetch" href="/blog/assets/js/56.c2bd5b15.js"><link rel="prefetch" href="/blog/assets/js/57.fa18aec0.js"><link rel="prefetch" href="/blog/assets/js/58.1d241667.js"><link rel="prefetch" href="/blog/assets/js/59.db936e4f.js"><link rel="prefetch" href="/blog/assets/js/6.543ff75d.js"><link rel="prefetch" href="/blog/assets/js/60.b14fbc4d.js"><link rel="prefetch" href="/blog/assets/js/61.20906def.js"><link rel="prefetch" href="/blog/assets/js/62.fa3758d4.js"><link rel="prefetch" href="/blog/assets/js/63.af1eb3ba.js"><link rel="prefetch" href="/blog/assets/js/64.27862b51.js"><link rel="prefetch" href="/blog/assets/js/65.5fdf0374.js"><link rel="prefetch" href="/blog/assets/js/66.f812c0c3.js"><link rel="prefetch" href="/blog/assets/js/67.6c7733fa.js"><link rel="prefetch" href="/blog/assets/js/68.3201095e.js"><link rel="prefetch" href="/blog/assets/js/7.20c9a424.js"><link rel="prefetch" href="/blog/assets/js/8.43466844.js"><link rel="prefetch" href="/blog/assets/js/9.68ce7bf6.js">
    <link rel="stylesheet" href="/blog/assets/css/0.styles.e16238e2.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container no-sidebar" data-v-1aefc0b4><div data-v-1aefc0b4><div id="loader-wrapper" class="loading-wrapper" data-v-d48f4d20 data-v-1aefc0b4 data-v-1aefc0b4><div class="loader-main" data-v-d48f4d20><div data-v-d48f4d20></div><div data-v-d48f4d20></div><div data-v-d48f4d20></div><div data-v-d48f4d20></div></div> <!----> <!----></div> <div class="password-shadow password-wrapper-out" style="display:none;" data-v-25ba6db2 data-v-1aefc0b4 data-v-1aefc0b4><h3 class="title" data-v-25ba6db2 data-v-25ba6db2></h3> <p class="description" data-v-25ba6db2 data-v-25ba6db2></p> <label id="box" class="inputBox" data-v-25ba6db2 data-v-25ba6db2><input type="password" value="" data-v-25ba6db2> <span data-v-25ba6db2>Konck! Knock!</span> <button data-v-25ba6db2>OK</button></label> <div class="footer" data-v-25ba6db2 data-v-25ba6db2><span data-v-25ba6db2><i class="iconfont reco-theme" data-v-25ba6db2></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-25ba6db2>vuePress-theme-reco</a></span> <span data-v-25ba6db2><i class="iconfont reco-copyright" data-v-25ba6db2></i> <a data-v-25ba6db2><!---->
            
          <span data-v-25ba6db2>2017 - </span>
          2022
        </a></span></div></div> <div class="hide" data-v-1aefc0b4><header class="navbar" data-v-1aefc0b4><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/blog/" class="home-link router-link-active"><img src="/blog/logo.png" alt="" class="logo"> <!----></a> <div class="links"><div class="color-picker"><a class="color-button"><i class="iconfont reco-color"></i></a> <div class="color-picker-menu" style="display:none;"><div class="mode-options"><h4 class="title">Choose mode</h4> <ul class="color-mode-options"><li class="dark">dark</li><li class="auto active">auto</li><li class="light">light</li></ul></div></div></div> <div class="search-box"><i class="iconfont reco-search"></i> <input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/blog/" class="nav-link"><i class="iconfont reco-home"></i>
  Home
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-category"></i>
      Category
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/categories/JS-node/" class="nav-link"><i class="undefined"></i>
  JS-node
</a></li><li class="dropdown-item"><!----> <a href="/blog/categories/react-node/" class="nav-link"><i class="undefined"></i>
  react-node
</a></li><li class="dropdown-item"><!----> <a href="/blog/categories/other-node/" class="nav-link"><i class="undefined"></i>
  other-node
</a></li></ul></div></div><div class="nav-item"><a href="/blog/tag/" class="nav-link"><i class="iconfont reco-tag"></i>
  Tag
</a></div><div class="nav-item"><a href="/blog/timeline/" class="nav-link"><i class="iconfont reco-date"></i>
  TimeLine
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-message"></i>
      Docs
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/docs/react-components/" class="nav-link"><i class="undefined"></i>
  vuepress-reco
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-message"></i>
      Contact
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://blog.github.io" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont reco-github"></i>
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask" data-v-1aefc0b4></div> <aside class="sidebar" data-v-1aefc0b4><div class="personal-info-wrapper" data-v-39576ba9 data-v-1aefc0b4><img src="/blog/avatar.png" alt="author-avatar" class="personal-img" data-v-39576ba9> <!----> <div class="num" data-v-39576ba9><div data-v-39576ba9><h3 data-v-39576ba9>57</h3> <h6 data-v-39576ba9>Articles</h6></div> <div data-v-39576ba9><h3 data-v-39576ba9>1</h3> <h6 data-v-39576ba9>Tags</h6></div></div> <ul class="social-links" data-v-39576ba9></ul> <hr data-v-39576ba9></div> <nav class="nav-links"><div class="nav-item"><a href="/blog/" class="nav-link"><i class="iconfont reco-home"></i>
  Home
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-category"></i>
      Category
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/categories/JS-node/" class="nav-link"><i class="undefined"></i>
  JS-node
</a></li><li class="dropdown-item"><!----> <a href="/blog/categories/react-node/" class="nav-link"><i class="undefined"></i>
  react-node
</a></li><li class="dropdown-item"><!----> <a href="/blog/categories/other-node/" class="nav-link"><i class="undefined"></i>
  other-node
</a></li></ul></div></div><div class="nav-item"><a href="/blog/tag/" class="nav-link"><i class="iconfont reco-tag"></i>
  Tag
</a></div><div class="nav-item"><a href="/blog/timeline/" class="nav-link"><i class="iconfont reco-date"></i>
  TimeLine
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-message"></i>
      Docs
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/docs/react-components/" class="nav-link"><i class="undefined"></i>
  vuepress-reco
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-message"></i>
      Contact
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://blog.github.io" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont reco-github"></i>
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <!----></nav> <!----> </aside> <div class="password-shadow password-wrapper-in" style="display:none;" data-v-25ba6db2 data-v-1aefc0b4><h3 class="title" data-v-25ba6db2 data-v-25ba6db2>DOM</h3> <!----> <label id="box" class="inputBox" data-v-25ba6db2 data-v-25ba6db2><input type="password" value="" data-v-25ba6db2> <span data-v-25ba6db2>Konck! Knock!</span> <button data-v-25ba6db2>OK</button></label> <div class="footer" data-v-25ba6db2 data-v-25ba6db2><span data-v-25ba6db2><i class="iconfont reco-theme" data-v-25ba6db2></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-25ba6db2>vuePress-theme-reco</a></span> <span data-v-25ba6db2><i class="iconfont reco-copyright" data-v-25ba6db2></i> <a data-v-25ba6db2><!---->
            
          <span data-v-25ba6db2>2017 - </span>
          2022
        </a></span></div></div> <div data-v-1aefc0b4><main class="page" style="padding-right:0;"><section><div class="page-title"><h1 class="title">DOM</h1> <div data-v-f875f3fc><!----> <i class="iconfont reco-date" data-v-f875f3fc><span data-v-f875f3fc>8/16/2021</span></i> <!----> <i class="tags iconfont reco-tag" data-v-f875f3fc><span class="tag-item" data-v-f875f3fc>tag4</span></i></div></div> <div class="theme-reco-content content__default"><h1 id="dom"><a href="#dom" class="header-anchor">#</a> DOM</h1> <h4 id="基础知识"><a href="#基础知识" class="header-anchor">#</a> 基础知识</h4> <p>子节点：document.body.childNodes 列表心态</p> <p>nodeName:节点名称（#text #comment #document 标签就是大写的标签名</p> <p>nodeType:节点类型 ：元素1 属性2 文本3 注释8 文档9</p> <p>nodeValue：节点值 (文本节点：文本 注释内容 元素节点不可用)</p> <p>getElementsByTagName()和getElementsByClassName()获取到的结果是一个HTMLCollection，有三个方法：</p> <p>length</p> <p>item（index）===元素（index）</p> <p>namedItem(name) 根据元素的name值</p> <p>**注意：**没有forEach()方法</p> <p>可以通过父元素获取后代中是否有这个标签的列表：</p> <p>var divs=div.getElementsByTagName(&quot;div&quot;)</p> <p>表单中：</p> <p>getElementsByName() 根据标签中的name属性来获取，不能根据父元素获取后代中的name属性（id同）获取到NodeList</p> <p>NodeList有以下几种方法：</p> <p>.forEach(function(item,index,arr){})</p> <p>.item(索引)</p> <p>.keys()</p> <p>.values()</p> <p>.entries()</p> <p>document.querySelector()和document.querySelectorAll()：根据选择器获取元素（兼容性不好）第二个获取是是NodeList;可以根据父元素获取</p> <h4 id="节点遍历"><a href="#节点遍历" class="header-anchor">#</a> 节点遍历</h4> <p>body所有元素：document.body.children() 只获取子标签</p> <p>body所有子节点：document.body.childNodes() 获取标签，文本，注释，换行等</p> <p>.parentElement 父元素（HTML没有父元素）</p> <p>.parentNode 父节点 （HTML的父节点是document）</p> <p>.firstElementChild 第一个子元素</p> <p>.lastElementChild 最后一个子元素</p> <p>.firstChild 第一个子节点</p> <p>.lastChild 最后一个子节点</p> <p>.nextElementSibling 下一个兄弟节点</p> <p>.previousElementSibling 上一个兄弟节点</p> <p>.nextSibling 下一个兄弟节点</p> <p>.previousSibling 上一个兄弟节点</p> <h4 id="dom的创建"><a href="#dom的创建" class="header-anchor">#</a> DOM的创建</h4> <p>document.createChild(标签名)：根据标签名创建元素</p> <p>父元素.appendChild(子元素)：将元素追加到父元素尾部</p> <p>document.createDocumentFlagment() 碎片容器，用于已经拥有父容器里面要放入大量元素时</p> <p>**注意：**使用innerHTML +=时，会让页面重新加载，之前的标签不会被销毁，就会重新加载之前的标签，页面中之前的标签改变时，当前标签不会改变，所以以后尽量减少使用innerHTML 来加载页面 或者插入新元素</p> <p>innerText只能获取当前元素的文本和后代文本，不保留空格和换行</p> <p>父元素.insertBefore(新元素，要插入这个元素之前)  在某个元素之前插入</p> <p>创建文本节点：</p> <p>document.createTextNode(文本)</p> <p>创建img :document.createElement(&quot;img&quot;)===new Image()</p> <p>复制节点：</p> <p>元素.cloneNode(false) 浅复制，只复制标签</p> <p>元素.cloneNode(true) 深复制，会将这个标签内的元素及后代都复制</p> <p>删除节点：</p> <p>1.父删子：负元素.removeChild(子元素)</p> <p>2.自己删除自己：子元素.remove()</p> <p>替换节点：</p> <p>父元素.replaceChild(新元素，被替换的元素)</p> <p>插入文本内容：</p> <p>元素.textContent(文本) //会保留元素后代中的所有节点，包括换行，只会渲染成字符串，不会解析html代码</p> <h4 id="dom属性"><a href="#dom属性" class="header-anchor">#</a> DOM属性</h4> <p>创建dom元素没有加到页面之前，是放在内存的堆中</p> <p>标签属性：给元素添加的标签属性</p> <p>dom如何添加对象属性，获取对象属性</p> <p>元素.setAttribute(&quot;key&quot;,&quot;值&quot;) 添加标签属性</p> <p>元素.getAttribute(&quot;key&quot;) 获取标签属性</p> <p>**注意：**设置标签属性的值必须是字符串，如果不是字符串会隐式转换为字符串，标签属性起名有规范：通常起名使用驼峰式，但是标签属性使用“-”连接；标签不区分大小写，css选择器不区分大小写；标签属性也是用“-”方式书写+</p> <p>元素.removeAttribute(&quot;key&quot;) 删除标签属性</p> <p><strong>标签属性的作用</strong>：为了给标签作标记，并且快速有效的找到对应的标签</p> <p>有些标签属性和对象属性公用的，通常来说，标签的系统自带的标签属性是共通的，除了class之外</p> <p>任何标签都是HTML超文本，在页面创建时，会将超文本转换为DOM树，DOM树就是一个对象结构的树，对象属性就是直接作用于DOM树的对象结果，标签属性是作用于超文本内容，当设置了标签属性后，这个属性将会通过设置DOM而引起DOM对象属性的改变，并且确认是否进行回流和重绘。</p> <p>input. abc=0 // 不会引起重绘和回流</p> <p>input.setAttribute(&quot;abc&quot;,&quot;0&quot;) // 会引起重绘和回流（在页面添加之后）</p> <p><strong>BOM对象属性设置不一定会引起重绘和回流，而设置标签属性，一定会引起重绘和回流。</strong></p> <p>标签的属性名如果和属性值相同，我们通常可以在标签中设置为单独标签属性就可以了。</p> <p>这种属性名和属性值相同的标签属性，在对象属性中使用布尔处理</p> <p>属性名.checked=true</p> <p>**注意：**div.setAttribute(&quot;class&quot;,'divs')</p> <p>​           div.className=&quot;div1&quot;</p> <p>**总结：**HTML超文本----&gt; DOM对象----&gt;DOM对象渲染树</p> <p>修改标签属性就是修改HTML超文本（标签），会引起DOM对象属性的改变。</p> <p>修改DOM对象属性和修改DOM对象时，不一定会引起HTML超文本改变（只有部分系统标签属性会改变）</p> <p><strong>哪些对象属性不会引起标签属性的改变：</strong></p> <p>1.自定义对象属性</p> <p>2.标签的属性名如果和属性值相同，不一定会改变（disabled可能会；checked会）</p> <p><strong>如果设置了标签属性和设置了对象属性产生冲突时，遵循对象属性。</strong></p> <p>div.style在变为DOM渲染树以后就会变为对象，CSSStyleDeclaration类型，因为对象属性名的要求不能使用“-”，所以所有css样式都将“-”去掉，使用驼峰式命名法。</p> <p>当设置了style属性时，会自动更新转换为行内样式</p> <p>div.style.width=&quot;50px&quot;</p> <p>超文本标记在页面运行到最下面时就会完成DOM树，并且完成DOM树的渲染。</p> <p>标签中设置了行内属性和div.style.属性，通过div.style这种方式是可以获取到的，但是style样式中设置的是不能获取到的</p> <p>如果要获取到标签的属性或者css样式设置属性，这些属性都是在DOM树渲染完成后计算得到的，因此无法获取到。</p> <p>但是<strong>DOM提供了一个临时可以进行计算的方法</strong>：</p> <p>getComputedStyle(div) 获取到div计算后的实际宽度</p> <p>getComputedStyle(div,&quot;:after/:before&quot;) 获取计算后的样式，<strong>只有after和before两种可以</strong></p> <p>对于IE8及以下不支持</p> <p>div.currentStyle 获取IE8及以下浏览器支持，火狐谷歌IE9以上不支持</p> <p><strong>DOM设置样式都是针对某一个DOM元素的，这种设置时都会被设为行内样式</strong></p> <h5 id="获取css样式"><a href="#获取css样式" class="header-anchor">#</a> 获取css样式</h5> <p>document.styleSheets 获取到列表</p> <p>这个列表中放入到这里为止之前所有的style 设置css和link引入css列表内容，这个style是一个对象型列表，包括对象属性和索引下标</p> <p>索引下标是指设置的样式属性</p> <p>而属性是指所有样式属性</p> <p>可以根据所有下标找到已经设置的属性名，然后根据属性获取到对应的属性值</p> <p><strong>修改style样式</strong></p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">var</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>i<span class="token operator">&lt;</span>document<span class="token punctuation">.</span>styleSheets<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>cssRules<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>style<span class="token punctuation">.</span>length<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	<span class="token keyword">var</span> key<span class="token operator">=</span>document<span class="token punctuation">.</span>styleSheets<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>cssRules<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>style<span class="token punctuation">[</span>i<span class="token punctuation">]</span>
    <span class="token comment">// 因为css设置时不识别大小写，所以只能用-，不能用驼峰</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>key<span class="token operator">===</span><span class="token string">&quot;background-color&quot;</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        document<span class="token punctuation">.</span>styleSheets<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>cssRules<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>style<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token operator">=</span><span class="token string">&quot;green&quot;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>document.styleSheets style列表 不同style标签或者link，就会形成不同列表</p> <p>document.styleSheets[0].cssRules 第0位style列表中，所有css设置列表</p> <p>document.styleSheets[0].cssRules[0].tyle 第0位style列表中，第0个css列表中，所有设置样式</p> <p><strong>添加style样式</strong></p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">var</span> style <span class="token operator">=</span>document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">&quot;style&quot;</span><span class="token punctuation">)</span>
document<span class="token punctuation">.</span>head<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>styles<span class="token punctuation">)</span>
<span class="token keyword">var</span> styleSheet<span class="token operator">=</span>document<span class="token punctuation">.</span>styleSheets<span class="token punctuation">[</span>document<span class="token punctuation">.</span>styleSheets<span class="token punctuation">.</span>length<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span>
<span class="token comment">//styleSheet.addRule(选择器，样式，索引)</span>
styleSheet<span class="token punctuation">.</span><span class="token function">addRule</span><span class="token punctuation">(</span><span class="token string">&quot;.div&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;color:red;&quot;</span><span class="token punctuation">,</span>styleSheet<span class="token punctuation">.</span>cssRules<span class="token punctuation">.</span>length<span class="token punctuation">)</span>
<span class="token comment">// styleSheet.insertRule(选择器{}，索引) 支持IE8及以下</span>
styleSheet<span class="token punctuation">.</span><span class="token function">insertRule</span><span class="token punctuation">(</span><span class="token string">&quot;.div{color:red;}&quot;</span><span class="token punctuation">,</span>styleSheet<span class="token punctuation">.</span>cssRules<span class="token punctuation">.</span>length<span class="token punctuation">)</span>
<span class="token comment">// styleSheet.replace(要替换的内容，索引)</span>
<span class="token comment">//styleSheet.removeRule(索引)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h5 id="dom部分属性"><a href="#dom部分属性" class="header-anchor">#</a> DOM部分属性</h5> <p>document.documentElement ==》HTML标签</p> <p>document.body ==》body标签</p> <p>clientWidth:客户宽度=宽度+padding-滚动条宽度（在不同浏览器和系统下不一样）</p> <p>clientHeight:客户高度=高度+padding-滚动条高度（在不同浏览器和系统下不一样）</p> <p>offsetWidth:偏移宽度=宽度+padding+border</p> <p>offsetHeight:偏移高度=高度+padding+border</p> <p>scrollWidth:滚动条宽度=容器内实际内容宽度+padding（左边的padding）</p> <p>scrollHeight:滚动条宽度=容器内实际内容高度+padding</p> <h6 id="元素"><a href="#元素" class="header-anchor">#</a> 元素</h6> <p>body和HTML</p> <p><strong>body</strong></p> <p>document.body.clientWidth就是body的宽度（浏览器宽度-滚动条宽度-2*margin大小）</p> <p>document.body.clientHeight就是内容撑开的高度，最小是0</p> <p><strong>html</strong></p> <p>document.documentElement.clientWidth:html宽度：浏览器宽度-滚动条宽度</p> <p>document.documentElement.clientHeight:html高度：浏览器可视高度</p> <p><strong>body</strong></p> <p>document.body.offsetWidth和document.offsetHeight</p> <p>和document.body.clientWidth和document.body.clientHeight相同</p> <p><strong>html</strong></p> <p>document.documentElement.offsetWidth和document.documentElement.offsetHeight是实际html的内容宽高</p> <p><strong>body和html的scrollWidth,scrollHeight</strong></p> <p>body的scrollWidth和scrollHeight是body实际内容宽高</p> <p>html的scrollWidth和scrollHeight是实际内容宽高,但是如果实际内容宽高小于视口高度时，scrollHeight等同于视口宽度</p> <p><strong>总结</strong></p> <p>1.任何没有放在页面中的元素，都无法获取它宽高和后面的位置，</p> <p>2.不管获取宽高还是获取位置，都需要重新将渲染树拆开，并且重新计算css样式后才可以获取到，这就意味着使用获取宽高和位置会产生回流和重绘，如果只是获取，只会重绘；如果是设置，则会回流</p> <h6 id="位置"><a href="#位置" class="header-anchor">#</a> 位置</h6> <p>clientLeft:左边线粗细</p> <p>clientTop:上边线粗细</p> <p>offsetLeft:相对于容器左上顶点坐标（父容器做定位），如果父元素没有定位，则向上寻找定位，直到html</p> <p>offsetTop:</p> <p>scrollLeft:滚动条左距离（可读可写）</p> <p>scrollTop:滚动条上距离（可读可写）</p> <p>滚动条高度：clientHeight/scrollHeight*clientHeight</p> <p>滚动小条高度：clientHeight/scrollHeight*scrollTop</p> <p><strong>body和html位置：</strong></p> <p>低火狐谷歌版本中，窗口的滚动条是body的scrollTop,scrollLeft</p> <p>但在现在的版本中，窗口的滚动条是html的scrollTop,scrollLeft</p></div></section> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated: </span> <span class="time">2/16/2022, 8:05:26 PM</span></div></footer> <!----> <div class="comments-wrapper"><!----></div> <ul class="side-bar sub-sidebar-wrapper" style="width:0;" data-v-cb1513f6></ul></main> <!----></div></div></div></div><div class="global-ui"><div class="back-to-ceiling" style="right:1rem;bottom:6rem;width:2.5rem;height:2.5rem;border-radius:.25rem;line-height:2.5rem;display:none;" data-v-c6073ba8 data-v-c6073ba8><svg t="1574745035067" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="5404" class="icon" data-v-c6073ba8><path d="M526.60727968 10.90185116a27.675 27.675 0 0 0-29.21455937 0c-131.36607665 82.28402758-218.69155461 228.01873535-218.69155402 394.07834331a462.20625001 462.20625001 0 0 0 5.36959153 69.94390903c1.00431239 6.55289093-0.34802892 13.13561351-3.76865779 18.80351572-32.63518765 54.11355614-51.75690182 118.55860487-51.7569018 187.94566865a371.06718723 371.06718723 0 0 0 11.50484808 91.98906777c6.53300375 25.50556257 41.68394495 28.14064038 52.69160883 4.22606766 17.37162448-37.73630017 42.14135425-72.50938081 72.80769204-103.21549295 2.18761121 3.04276886 4.15646224 6.24463696 6.40373557 9.22774369a1871.4375 1871.4375 0 0 0 140.04691725 5.34970492 1866.36093723 1866.36093723 0 0 0 140.04691723-5.34970492c2.24727335-2.98310674 4.21612437-6.18497483 6.3937923-9.2178004 30.66633723 30.70611158 55.4360664 65.4791928 72.80769147 103.21549355 11.00766384 23.91457269 46.15860503 21.27949489 52.69160879-4.22606768a371.15156223 371.15156223 0 0 0 11.514792-91.99901164c0-69.36717486-19.13165746-133.82216804-51.75690182-187.92578088-3.42062944-5.66790279-4.76302748-12.26056868-3.76865837-18.80351632a462.20625001 462.20625001 0 0 0 5.36959269-69.943909c-0.00994388-166.08943902-87.32547796-311.81420293-218.6915546-394.09823051zM605.93803103 357.87693858a93.93749974 93.93749974 0 1 1-187.89594924 6.1e-7 93.93749974 93.93749974 0 0 1 187.89594924-6.1e-7z" p-id="5405" data-v-c6073ba8></path><path d="M429.50777625 765.63860547C429.50777625 803.39355007 466.44236686 1000.39046097 512.00932183 1000.39046097c45.56695499 0 82.4922232-197.00623328 82.5015456-234.7518555 0-37.75494459-36.9345906-68.35043303-82.4922232-68.34111062-45.57627738-0.00932239-82.52019037 30.59548842-82.51086798 68.34111062z" p-id="5406" data-v-c6073ba8></path></svg></div></div></div>
    <script src="/blog/assets/js/app.b2f6f841.js" defer></script><script src="/blog/assets/js/3.9045caea.js" defer></script><script src="/blog/assets/js/1.938e8213.js" defer></script><script src="/blog/assets/js/14.7af64170.js" defer></script>
  </body>
</html>
